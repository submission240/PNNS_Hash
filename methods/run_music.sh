#!/bin/bash
make clean
make -j

# ------------------------------------------------------------------------------
#  Parameters for Point-to-Hyperplane Nearest Neighbor Search
# ------------------------------------------------------------------------------
dname=Music
n=1000000
d=100
qn=100
b=0.9
cf=config
oFolder=../results/
dPath=../data/bin/${dname}/${dname}

# ------------------------------------------------------------------------------
#  Ground Truth
# ------------------------------------------------------------------------------
./plane -alg 0 -n ${n} -qn ${qn} -d ${d} -ds ${dPath}.ds -qs ${dPath}.q \
  -ts ${dPath}.gt

# ------------------------------------------------------------------------------
#  Linear-Scan
# ------------------------------------------------------------------------------
./plane -alg 1 -n ${n} -qn ${qn} -d ${d} -dn ${dname} -ds ${dPath}.ds \
  -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}

# ------------------------------------------------------------------------------
#  Random-Scan
# ------------------------------------------------------------------------------
./plane -alg 2 -n ${n} -qn ${qn} -d ${d} -cf ${cf} -dn ${dname} \
  -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}

# ------------------------------------------------------------------------------
#  Sorted-Scan
# ------------------------------------------------------------------------------
./plane -alg 3 -n ${n} -qn ${qn} -d ${d} -cf ${cf} -dn ${dname} \
  -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}

# ------------------------------------------------------------------------------
#  EH
# ------------------------------------------------------------------------------
for l in 8 16 32 64 128 256
do
  for m in 2 4 6 8 10
  do
    ./plane -alg 4 -n ${n} -qn ${qn} -d ${d} -m ${m} -l ${l} -b ${b} -cf ${cf} \
      -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
  done
done

# ------------------------------------------------------------------------------
#  BH
# ------------------------------------------------------------------------------
for l in 8 16 32 64 128 256
do
  for m in 2 4 6 8 10
  do
    ./plane -alg 5 -n ${n} -qn ${qn} -d ${d} -m ${m} -l ${l} -b ${b} -cf ${cf} \
      -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
  done
done

# ------------------------------------------------------------------------------
#  MH
# ------------------------------------------------------------------------------
for l in 8 16 32 64 128 256
do
  for m in 2 4 6 8 10
  do
    for M in 4 8 16
    do
      ./plane -alg 6 -n ${n} -qn ${qn} -d ${d} -m ${m} -l ${l} -M ${M} -b ${b} \
        -cf ${cf} -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt \
        -of ${oFolder}
    done
  done
done 

# ------------------------------------------------------------------------------
#  MFH
# ------------------------------------------------------------------------------
for m in 8 16 32 64 128 256
do
  ./plane -alg 7 -n ${n} -qn ${qn} -d ${d} -m ${m} -b ${b} -cf ${cf} \
    -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
done

# ------------------------------------------------------------------------------
#  FH
# ------------------------------------------------------------------------------
for m in 8 16 32 64 128 256
do
  ./plane -alg 8 -n ${n} -qn ${qn} -d ${d} -m ${m} -cf ${cf} \
    -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
done

# ------------------------------------------------------------------------------
#  NH (NH with QALSH)
# ------------------------------------------------------------------------------
for m in 8 16 32 64 128 256
do
  ./plane -alg 9 -n ${n} -qn ${qn} -d ${d} -m ${m} -cf ${cf} \
    -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
done

# ------------------------------------------------------------------------------
#  NH_LCCS (NH with LCCS-LSH)
# ------------------------------------------------------------------------------
w=1.0
for m in 8 16 32 64 128 256
do
  ./plane -alg 10 -n ${n} -qn ${qn} -d ${d} -m ${m} -w ${w} -cf ${cf} \
    -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
done

# ------------------------------------------------------------------------------
#  MFH_Sampling
# ------------------------------------------------------------------------------
for m in 8 16 32 64 128 256
do
  for s in 1 2 4 8
  do
    ./plane -alg 11 -n ${n} -qn ${qn} -d ${d} -m ${m} -s ${s} -b ${b} -cf ${cf} \
      -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
  done
done

# ------------------------------------------------------------------------------
#  FH_Sampling
# ------------------------------------------------------------------------------
for m in 8 16 32 64 128 256
do
  for s in 1 2 4 8
  do
    ./plane -alg 12 -n ${n} -qn ${qn} -d ${d} -m ${m} -s ${s} -cf ${cf} \
      -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
  done
done

# ------------------------------------------------------------------------------
#  NH_Sampling
# ------------------------------------------------------------------------------
for m in 8 16 32 64 128 256
do
  for s in 1 2 4 8
  do
    ./plane -alg 13 -n ${n} -qn ${qn} -d ${d} -m ${m} -s ${s} -cf ${cf} \
      -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
  done
done


# ------------------------------------------------------------------------------
#  NH_LCCS_Sampling
# ------------------------------------------------------------------------------
w=0.1
for m in 8 16 32 64 128 256
do
  for s in 1 2 4 8
  do
    ./plane -alg 14 -n ${n} -qn ${qn} -d ${d} -m ${m} -w ${w} -s ${s} -cf ${cf} \
      -dn ${dname} -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.gt -of ${oFolder}
  done
done
